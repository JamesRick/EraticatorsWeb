<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/bootstrap-grid.css"/>
    <link rel="stylesheet" href="../css/bootstrap-reboot.css"/>
    <link rel="stylesheet" href="../css/login_css.css"/>
    <link rel="stylesheet" href="../css/main.css"/>

    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
    <script src="../js/FireBase.js"></script>
</head>
<body id="woo">
<a href= "../html/graph.html" type="button" id="graph" role="button" class="btn btn-warning btn-sm">Graph</a>
<a href= "../html/addRat.html" type="button" id="addRatButton" role="button" class="btn btn-warning btn-sm">Add Rat</a>
<a href= "../html/testMap.html" type="button" id="testMap" role="button" class="btn btn-warning btn-sm">Map Rats</a>
<div id="dvTable" class="row">
    <div id="tbls">
        <table id="myTbl" class="table table-striped cu" width="100%;">
            <script>
                const data = firebase.database();
                const ratRef = data.ref("RAT_TABLE");

                var table = '';

                table += '<thead>' +  '<tr class="tablelook">' +
                    '<th>Key</th>' +
                    '<th>Created Date</th>' +
                    '<th>Location Type</th>' + '<th>Incident Zip</th>' +
                    '<th>Incident Address</th>' + '<th>City</th>' +
                    '<th>Borough</th>' + '<th>Latitude</th>' + '<th>Longitude</th>' +
                    '</tr>' + '</thead>';

                ratRef.limitToLast(40).once('value', function (snapshot) {
                    if (snapshot.exists()) {
                        snapshot.forEach(function (children) {
                            table += '<tr>';
                            table += '<td>' + children.child("name").val() + '</td>';
                            table += '<td>' + children.child("date").val() + '</td>';
                            table += '<td>' + children.child("type").val() + '</td>';
                            table += '<td>' + children.child("zip").val() + '</td>';
                            table += '<td>' + children.child("address").val() + '</td>';
                            table += '<td>' + children.child("city").val() + '</td>';
                            table += '<td>' + children.child("borough").val() + '</td>';
                            table += '<td>' + children.child("latitude").val() + '</td>';
                            table += '<td>' + children.child("longitude").val() + '</td>';
                            table += '</tr>';
                        });
                    }
                });

                window.setTimeout(writer, 5000);
                function writer() {
                    //alert(table);
                    document.getElementById("myTbl").innerHTML = table;
                }
            </script>
        </table>
    </div>
</div>


<script src="../js/main.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-messaging.js"></script>
<script src="../js/index.js"></script>
<script src="../js/bootstrap.bundle.js"></script>
<script src="../js/bootstrap.js"></script>
<script src="../js/login.js"></script>

<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<script src="/Stuff/js/login.js"></script>
</body>
</html>
